{% extends 'emp/base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block css %}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet" href="{% static 'external/Searchable-Multi-select-jQuery-Dropdown/jquery.dropdown.css' %}">
<style type="text/css">
	.select2-container{
		width: 100%!important;
	}
	.select2-container--default .select2-selection--multiple{
		border: none!important;
		border: 1px solid #ced4da!important;
	}
</style>
{% endblock %}

{% block content %}
<form class="py-5">
	<div class="form-row">
		<div class="col-sm-8">
			<div class="form-group">
	    		<div class="input-group mb-2">
        			<div class="input-group-prepend">
          				<div class="input-group-text"><i class="fas fa-user"></i></div>
        			</div>
        			<input class="form-control" id="" value="{{student.user.get_full_name | default_if_none:''}}" readonly>
      			</div>
  			</div>
		</div>
	</div>
	<div class="form-row">
		<div class="col-lg-4 col-sm-6">
			<div class="form-group">
	    		<div class="input-group mb-2">
        			<div class="input-group-prepend">
          				<div class="input-group-text"><i class="fas fa-envelope"></i></div>
        			</div>
        			<input class="form-control" id="" value="{{student.user.email | default_if_none:''}}" readonly>
      			</div>
  			</div>
		</div>
		<div class="col-lg-4 col-sm-6">
			<div class="form-group">
	    		<div class="input-group mb-2">
        			<div class="input-group-prepend">
          				<div class="input-group-text"><i class="fas fa-phone-alt"></i></div>
        			</div>
        			<input class="form-control" id="" value="{{student.phone | default_if_none:''}}" readonly>
      			</div>
  			</div>
		</div>
	</div>
	<div class="form-row">
		<div class="col-sm-8">
			<div class="form-group">
	    		<div class="input-group mb-2">
        			<div class="input-group-prepend">
          				<div class="input-group-text"><i class="fas fa-home"></i></div>
        			</div>
        			<input class="form-control" id="" value="{{student.address | default_if_none:''}}" readonly>
      			</div>
  			</div>
		</div>
		<div class="col-sm-8">
			<div class="form-group">
	    		<div class="input-group mb-2">
        			<div class="input-group-prepend">
          				<div class="input-group-text"><i class="fas fa-map-marker-alt"></i></div>
        			</div>
        			<input class="form-control" id="" value="{{location}}" readonly></input>
      			</div>
  			</div>
		</div>
	</div>
	<div class="form-row">
		<div class="col-sm-8">
			<div class="form-group">
	    		<div class="input-group mb-2">
        			<div class="input-group-prepend">
          				<div class="input-group-text"><i class="fas fa-landmark"></i></div>
        			</div>
        			<input class="form-control" id="" value="{{student.spk_institute | default_if_none:''}}" readonly>
      			</div>
  			</div>
		</div>
		<div class="col-sm-8">
			<div class="form-group">
	    		<div class="input-group mb-2">
        			<div class="input-group-prepend">
          				<div class="input-group-text"><i class="fas fa-map-marker-alt"></i></div>
        			</div>
        			<input class="form-control" id="" value="{{location}}" readonly></input>
      			</div>
  			</div>
		</div>
	</div>
</form>
<form method="post">
	<div class="form-row">
    	<div class="col-sm-8">
    		<div class="demo mb-3">
          <label>{{ form.skills.label_tag }}</label>
  			<select multiple>
  			{% for skill in skills %}	
  			<option value="{{skill.id}}">{{skill.name}}</option>
  			{% endfor %}
  			</select>
		</div>
    	</div>
		<input type="hidden" id="skills_m" name="skills_m">
    	<div class="col-sm-8">
      		{{ form.about | as_crispy_field }}
    	</div>
    	<div class="col-sm-8">
      		{{ form.experience | as_crispy_field }}
    	</div>
    	<div class="col-sm-4">
    	</div>
    	<div class="col-sm-4">
      		{{ form.linkedin | as_crispy_field }}
    	</div>
		<div class="col-sm-4">
      		{{ form.github | as_crispy_field }}
    	</div>
    	<div class="col-sm-8">
      	{{ form.cover_letter | as_crispy_field }}
    	</div>

    	<!-- Add Education -->
    	<div class="col-sm-4"></div>
    	<div class="col-sm-4">
      	{{ education_form.degree | as_crispy_field }}
    	</div>
    	<div class="col-sm-4">
      	{{ education_form.institute | as_crispy_field }}
    	</div>
    	<div class="col-sm-4"></div>
    	<div class="col-sm-3">
      	{{ education_form.start_year | as_crispy_field }}
    	</div>
    	<div class="col-sm-3">
      	{{ education_form.end_year | as_crispy_field }}
    	</div>
    	<div class="col-sm-2">
      	{{ education_form.gpa | as_crispy_field }}
    	</div>
	</div>
	{% csrf_token %}
	<button type="submit" class="btn btn-primary mb-5" id="update_profile">Update Profile</button>
</form>
{% endblock %}
{% block js %}
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script  src="{% static 'external/Searchable-Multi-select-jQuery-Dropdown/jquery.dropdown.js' %}" ></script>

<script type="text/javascript">
$(document).ready(function() {
	// alert('here')
    $('.js-example-basic-multiple').select2();

    $('.demo').dropdown({multipleMode:'label'});


    $( "#update_profile" ).click(function() {
  // alert( "Handler for .click() called." );
	 var res = $('.dropdown-selected').text();
	 console.log(typeof res);
	 console.log( res);
	 var res1 = $('.dropdown-chose').text();
	 console.log(typeof res1);
	 console.log( res1);
	 var x =[];
	 $('.dropdown-chose').each(function(index, obj)
	 {
	  x.push($(this).text());
	 });
	alert(x);

	$('#skills_m').val(x);
	degree_id = $('#id_degree').val();
	document.getElementById("id_degree").setAttribute('value',degree_id);
	d=$('#id_degree option:selected').val();
	$('select[name="degree"]').val(d);
	alert(degree_id)
	$('#id_degree').val(degree_id);
	institute_id = $('#id_institute').val();
	// $('#id_institute').val(institute_id);
	document.getElementById("id_institute").setAttribute('value',institute_id);
	// alert($('#skills_m').val())
	});

});
</script>

{% endblock %}
